!function(){function a(a,b){if("number"==typeof b&&0!==b)return Math.floor((a||0)+b)}BOOMR=window.BOOMR||{};BOOMR.plugins=BOOMR.plugins||{};if(!BOOMR.plugins.NavigationTiming){var b={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(a){var c;if(a&&"spa_hard"===a.initiator)b.done(a);else if(a&&"spa"===a.initiator)b.sendBeacon();else{var d,e,f=(BOOMR.window,{});if(a){a.data&&(a=a.data);c=BOOMR.getPerformance();if(c&&a.restiming){f={nt_red_st:a.restiming.redirectStart,nt_red_end:a.restiming.redirectEnd,nt_fet_st:a.restiming.fetchStart,nt_dns_st:a.restiming.domainLookupStart,nt_dns_end:a.restiming.domainLookupEnd,nt_con_st:a.restiming.connectStart,nt_con_end:a.restiming.connectEnd,nt_req_st:a.restiming.requestStart,nt_res_st:a.restiming.responseStart,nt_res_end:a.restiming.responseEnd};a.restiming.secureConnectionStart&&(f.nt_ssl_st=a.restiming.secureConnectionStart);for(e in f)if(f.hasOwnProperty(e)&&f[e]){f[e]+=c.timing.navigationStart;f[e]=Math.floor(f[e])}}if(a.timing){d=a.timing;f.nt_req_st||(f.nt_req_st=d.requestStart);f.nt_res_st||(f.nt_res_st=d.responseStart);f.nt_res_end||(f.nt_res_end=d.responseEnd);f.nt_domint=d.domInteractive;f.nt_domcomp=d.domComplete;f.nt_load_st=d.loadEventEnd;f.nt_load_end=d.loadEventEnd}for(e in f)f.hasOwnProperty(e)&&!f[e]&&delete f[e];BOOMR.addVar(f);try{b.addedVars.push.apply(b.addedVars,Object.keys(f))}catch(g){}b.sendBeacon()}}},done:function(){var c,d,e,f,g,h,i=BOOMR.window,j={},k=0;if(this.complete)return this;b.addedVars=[];c=BOOMR.getPerformance();if(c){if("function"==typeof c.getEntriesByType){f=c.getEntriesByType("navigation");if(f&&f.length){BOOMR.info("This user agent supports NavigationTiming2","nt");f=f[0];k=c.timing?c.timing.navigationStart:0}else f=void 0}if(!f&&c.timing){BOOMR.info("This user agent supports NavigationTiming","nt");f=c.timing}if(f){j={nt_nav_st:c.timing?c.timing.navigationStart:0,nt_red_st:a(k,f.redirectStart),nt_red_end:a(k,f.redirectEnd),nt_fet_st:a(k,f.fetchStart),nt_dns_st:a(k,f.domainLookupStart),nt_dns_end:a(k,f.domainLookupEnd),nt_con_st:a(k,f.connectStart),nt_con_end:a(k,f.connectEnd),nt_req_st:a(k,f.requestStart),nt_res_st:a(k,f.responseStart),nt_res_end:a(k,f.responseEnd),nt_domloading:a(k,f.domLoading),nt_domint:a(k,f.domInteractive),nt_domcontloaded_st:a(k,f.domContentLoadedEventStart),nt_domcontloaded_end:a(k,f.domContentLoadedEventEnd),nt_domcomp:a(k,f.domComplete),nt_load_st:a(k,f.loadEventStart),nt_load_end:a(k,f.loadEventEnd),nt_unload_st:a(k,f.unloadEventStart),nt_unload_end:a(k,f.unloadEventEnd)};!j.nt_domloading&&c&&c.timing&&c.timing.domLoading&&(j.nt_domloading=c.timing.domLoading);f.secureConnectionStart&&(j.nt_ssl_st=a(k,f.secureConnectionStart));c.timing&&c.timing.msFirstPaint&&(j.nt_first_paint=c.timing.msFirstPaint);f.workerStart&&(j.nt_worker_start=a(k,f.workerStart));if(f.decodedBodySize||f.transferSize){j.nt_enc_size=f.encodedBodySize;j.nt_dec_size=f.decodedBodySize;j.nt_trn_size=f.transferSize}f.nextHopProtocol&&(j.nt_protocol=f.nextHopProtocol)}if(!j.nt_first_paint&&BOOMR.plugins.PaintTiming){h=BOOMR.plugins.PaintTiming.getTimingFor("first-paint");h&&(j.nt_first_paint=a(k,h))}if((!j.nt_protocol||!j.nt_first_paint)&&(!f||""!==f.nextHopProtocol)&&i.chrome&&"function"==typeof i.chrome.loadTimes){e=i.chrome.loadTimes();if(e){j.nt_spdy=e.wasFetchedViaSpdy?1:0;j.nt_cinf=e.connectionInfo;"number"==typeof e.firstPaintTime&&0!==e.firstPaintTime&&(j.nt_first_paint=Math.round(1e3*e.firstPaintTime))}}if(c.navigation){d=c.navigation;j.nt_red_cnt=d.redirectCount;j.nt_nav_type=d.type}for(g in j)j.hasOwnProperty(g)&&void 0===j[g]&&delete j[g];BOOMR.addVar(j);if(f&&(f.requestStart&&f.navigationStart&&f.requestStart<f.navigationStart||f.responseStart&&f.navigationStart&&f.responseStart<f.navigationStart||f.responseStart&&f.fetchStart&&f.responseStart<f.fetchStart||f.navigationStart&&f.fetchStart<f.navigationStart||f.responseEnd&&f.responseEnd>BOOMR.now()+864e5)){BOOMR.addVar("nt_bad",1);b.addedVars.push("nt_bad")}try{b.addedVars.push.apply(b.addedVars,Object.keys(j))}catch(l){}j.nt_load_end>0&&(this.fullySent=!0)}b.sendBeacon()},clear:function(){if(b.addedVars&&b.addedVars.length>0){BOOMR.removeVar(b.addedVars);b.addedVars=[]}this.complete=this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!b.initialized){BOOMR.subscribe("page_ready",b.done,null,b);BOOMR.subscribe("prerender_to_visible",b.prerenderToVisible,null,b);BOOMR.subscribe("xhr_load",b.xhr_done,null,b);BOOMR.subscribe("before_unload",b.done,null,b);BOOMR.subscribe("beacon",b.clear,null,b);b.initialized=!0}return this},is_complete:function(){return!0}}}}();
//# sourceMappingURL=navtiming.min.js.map